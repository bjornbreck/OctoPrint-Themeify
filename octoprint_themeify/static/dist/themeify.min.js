!function(g){function I(A){if(C[A])return C[A].exports;var n=C[A]={i:A,l:!1,exports:{}};return g[A].call(n.exports,n,n.exports,I),n.l=!0,n.exports}var C={};I.m=g,I.c=C,I.d=function(g,C,A){I.o(g,C)||Object.defineProperty(g,C,{configurable:!1,enumerable:!0,get:A})},I.n=function(g){var C=g&&g.__esModule?function(){return g.default}:function(){return g};return I.d(C,"a",C),C},I.o=function(g,I){return Object.prototype.hasOwnProperty.call(g,I)},I.p="",I(I.s=0)}([function(g,I,C){C(1),g.exports=C(2)},function(module,exports,__webpack_require__){"use strict";eval("\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/*\n * View model for OctoPrint-Themeify\n *\n * Author: Birk Johansson\n * License: MIT\n */\n$(function () {\n  function ThemeifyViewModel(parameters) {\n    var self = this;\n    self.classId = 'themeify';\n    self.settings = parameters[0];\n    self.ownSettings = {};\n    self.customRules = []; //These hold the customized and built-in changed/overriden elements, respectively\n\n    self.customizedElements = [];\n    self.builtInElements = [];\n    self._ownSettingsPrev = {}; //holds subscriptions, so that they can be removed later\n\n    self.configSubscriptions = {\n      enabled: '',\n      theme: ''\n    };\n    self.tabIcons = {};\n    self.oldTabContent = {};\n\n    var oldVal = function oldVal(key) {\n      return self._ownSettingsPrev[key];\n    };\n\n    self.onStartupComplete = function () {\n      var htmlId = $('html').attr('id'); //Remove styling if touch is enabled\n\n      if (htmlId && htmlId == 'touch') {\n        $('html').removeClass(self.classId);\n      }\n\n      self.updateColors();\n\n      self._updateCustomRules();\n    };\n\n    self.setupIcons = function () {\n      self.tabIcons.tabs().filter(function (tab) {\n        return tab.domId() && tab.enabled();\n      }).map(function (tab, i) {\n        var domId = tab.domId,\n            enabled = tab.enabled,\n            faIcon = tab.faIcon;\n        var icon = $(\"<i>\", {\n          class: faIcon()\n        });\n        var elem$ = $(\"\".concat(domId(), \" a\"));\n\n        if (elem$ && elem$.closest('ul').attr('id') === 'tabs') {\n          self.oldTabContent[domId()] = $(\"\".concat(domId(), \" a\")).html();\n          elem$.html(icon);\n        } else {\n          console.warn(\"Themeify: Failed to add icon! \".concat(domId(), \" is not a child of the tab-list!\"));\n        }\n      });\n    };\n\n    self.restoreTabs = function () {\n      self.tabIcons.tabs().filter(function (tab) {\n        return tab.domId();\n      }).map(function (tab, i) {\n        var domId = tab.domId,\n            enabled = tab.enabled,\n            faIcon = tab.faIcon;\n        var oldContent = self.oldTabContent[domId()];\n\n        if (oldContent) {\n          $(\"\".concat(domId(), \" a\")).html(oldContent);\n        }\n      });\n    };\n\n    self.enableBeforeLoaded = function () {\n      var localTheme = localStorage.getItem('theme');\n\n      if (localTheme) {\n        $('html').addClass(self.classId).addClass(localTheme);\n      }\n    };\n\n    self.enable = function () {\n      if (self.ownSettings.enabled() && $('html').attr('id') !== 'touch') {\n        var theme = self.ownSettings.theme();\n        localStorage.setItem('theme', theme);\n        $('html').addClass(self.classId).addClass(self.ownSettings.theme());\n      }\n    };\n\n    self.addNewCustomRule = function () {\n      var ruleObj = {\n        selector: ko.observable(''),\n        rule: ko.observable(''),\n        value: ko.observable(''),\n        enabled: ko.observable(true)\n      };\n\n      self._subscribeToDictValues(ruleObj, 'customRules');\n\n      self.ownSettings.customRules.push(ruleObj);\n    };\n\n    self.addNewIcon = function () {\n      var icon = {\n        domId: ko.observable(''),\n        enabled: ko.observable(true),\n        faIcon: ko.observable('')\n      };\n\n      self._subscribeToDictValues(icon, 'tabs');\n\n      self.tabIcons.tabs.push(icon);\n    };\n\n    self.onBeforeBinding = function () {\n      self.settings = self.settings.settings;\n      self.ownSettings = self.settings.plugins.themeify;\n      self.customRules = self.ownSettings.customRules.extend({\n        rateLimit: 50\n      });\n      self.onRuleToggle = self.onRuleToggle;\n      self.tabIcons = {\n        enabled: self.ownSettings.tabs.enableIcons,\n        tabs: self.ownSettings.tabs.icons\n      };\n\n      if (self.tabIcons.enabled()) {\n        self.setupIcons();\n      }\n\n      self.enable();\n\n      self._copyOwnSettings();\n    };\n\n    self.updateColors = function () {\n      self._removeBuiltInStyles();\n\n      if (self.ownSettings.enableCustomization()) {\n        self.ownSettings.color().filter(function (rule) {\n          return !!rule.enabled();\n        }).map(function (rule, i) {\n          self._applyRule(rule, true);\n        });\n      }\n    };\n\n    self._updateCustomRules = function () {\n      self._removeCustomStyles();\n\n      self.updateColors();\n\n      if (self.ownSettings.enableCustomization()) {\n        self.ownSettings.customRules().filter(function (rule) {\n          return !!rule.enabled();\n        }).map(function (rule) {\n          self._applyRule(rule);\n        });\n      }\n    };\n\n    self._applyRule = function (rule) {\n      var builtIn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var elem = $(rule.selector());\n      var old = elem.css(rule.rule());\n\n      if (builtIn) {\n        self.builtInElements.push({\n          elem: elem,\n          rule: rule.rule(),\n          old: old\n        });\n      } else {\n        self.customizedElements.push({\n          elem: elem,\n          rule: rule.rule(),\n          old: old\n        });\n      }\n\n      $(rule.selector()).css(rule.rule(), rule.value());\n    };\n\n    self.clone = function (obj) {\n      //get observable value\n      if (typeof obj == 'function') {\n        return obj();\n      }\n\n      if (obj === null || _typeof(obj) !== 'object' || 'isActiveClone' in obj) return obj;\n      if (obj instanceof Date) var temp = new obj.constructor();else var temp = obj.constructor();\n\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\n          obj['isActiveClone'] = null;\n          temp[key] = self.clone(obj[key]);\n          delete obj['isActiveClone'];\n        }\n      }\n\n      return temp;\n    };\n\n    self._copyOwnSettings = function () {\n      Object.keys(self.ownSettings).forEach(function (key, i) {\n        self._ownSettingsPrev[key] = self.clone(self.ownSettings[key]);\n      });\n    };\n\n    self.onChange = function (settingKey, newVal) {\n      self.updateColors();\n\n      self._copyOwnSettings();\n    };\n\n    self.onColorChange = function (elem, color) {\n      self.updateColors();\n\n      self._copyOwnSettings();\n    };\n\n    self.onCustomRuleChange = function (rule) {\n      self.updateColors();\n\n      if (rule.rule() && rule.selector() && rule.value()) {\n        self._updateCustomRules();\n      }\n    };\n\n    self.onThemeChange = function (newVal) {\n      var prev = oldVal('theme');\n\n      var hasClass = function hasClass(clazz) {\n        return $('html').hasClass(clazz);\n      };\n\n      if (!hasClass(newVal)) {\n        localStorage.setItem('theme', newVal);\n        $('html').addClass(newVal).removeClass(prev);\n      }\n\n      self._copyOwnSettings();\n    };\n\n    self.onEnabledChange = function (newVal) {\n      if (newVal && $('html').attr('id') !== 'touch') {\n        var theme = self.ownSettings.theme();\n        $('html').addClass(self.classId).addClass(theme);\n        localStorage.setItem('theme', theme);\n      } else {\n        $('html').removeClass(self.classId);\n        localStorage.setItem('theme', false);\n      }\n\n      self._copyOwnSettings();\n    };\n\n    self.onEnableCustomizationChange = function (newVal) {\n      if (newVal) {\n        self.updateColors();\n\n        self._updateCustomRules();\n      } else {\n        self._removeBuiltInStyles();\n\n        self._removeCustomStyles();\n      }\n\n      self._copyOwnSettings();\n    };\n\n    self.onIconsEnableChange = function (newVal) {\n      if (newVal) {\n        self.setupIcons();\n      } else {\n        self.restoreTabs();\n      }\n    };\n\n    self.onIconChange = function (icon, value, propKey) {\n      if (!self.tabIcons.enabled()) return;\n\n      if (propKey === 'enabled' && !value) {\n        self.restoreTabs();\n      }\n\n      self.setupIcons();\n    };\n\n    self._removeCustomStyles = function () {\n      self.customizedElements.map(function (elem) {\n        return elem.elem.css(elem.rule, '');\n      });\n    };\n\n    self._removeBuiltInStyles = function () {\n      self.builtInElements.map(function (elem) {\n        return elem.elem.css(elem.rule, '');\n      });\n    };\n\n    self._removeCustomStylesByRule = function (rule) {\n      $(rule.selector()).css(rule.rule(), '');\n    };\n\n    self.onRuleToggle = function (rule) {\n      rule.enabled(!rule.enabled()); //onCustomColorChange will pickup this change and update accordingly\n    };\n\n    self.ruleIsDeleteable = function (rule) {\n      //deleteable if not exists\n      if (!rule.deletable || typeof rule.deletable !== 'function') {\n        return true;\n      }\n\n      return rule.deletable();\n    };\n\n    self.onCustomRuleDelete = function (rule) {\n      if (self.ruleIsDeleteable(rule)) {\n        self.customRules.remove(rule);\n\n        self._updateCustomRules();\n      }\n    };\n\n    self.onIconDelete = function (icon) {\n      self.restoreTabs();\n      self.tabIcons.tabs.remove(icon);\n      self.setupIcons();\n    };\n\n    self._subscribeToDictValues = function (dict, key, subscribeFunc) {\n      var subFunc = subscribeFunc ? subscribeFunc.bind(this, dict) : self.onCustomRuleChange.bind(this, dict);\n      Object.keys(dict).map(function (dictAttr) {\n        self.configSubscriptions[key].push(dict[dictAttr].subscribe(function (val) {\n          return subFunc(val, dictAttr);\n        }));\n      });\n    };\n\n    self.onSettingsShown = function () {\n      var _this = this;\n\n      //subscribe to changes\n      Object.keys(self.ownSettings).map(function (key, i) {\n        if (key == 'customRules') {\n          self.configSubscriptions[key] = [];\n          self.customRules().map(function (rule, i) {\n            //subscribe to the attributes (selector, rule, value, enabled etc)\n            self._subscribeToDictValues(rule, key);\n          });\n        } else if (key == 'color') {\n          self.configSubscriptions[key] = [];\n          var subFunc = self.onColorChange; //Loop rules\n\n          self.ownSettings.color().map(function (rule, i) {\n            //subscribe to the attributes (selector, rule, value, enabled etc)\n            self._subscribeToDictValues(rule, key, subFunc);\n          });\n        } else if (key == 'tabs') {\n          var sub = self.configSubscriptions[key] = [];\n          var _self$tabIcons = self.tabIcons,\n              enabled = _self$tabIcons.enabled,\n              tabs = _self$tabIcons.tabs;\n          sub.push(enabled.subscribe(self.onIconsEnableChange));\n          tabs().map(function (tab, i) {\n            self._subscribeToDictValues(tab, key, self.onIconChange);\n          });\n        } else {\n          //Use the map for simple subscriptions\n          var onChangeFunc = self.configOnChangeMap[key] ? self.configOnChangeMap[key] : self.onChange.bind(_this, key);\n          self.configSubscriptions[key] = self.ownSettings[key].subscribe(onChangeFunc);\n        }\n      });\n    };\n\n    self.onSettingsHidden = function () {\n      //Cleanup subscriptions\n      Object.keys(self.configSubscriptions).map(function (key, i) {\n        if (Array.isArray(self.configSubscriptions[key])) {\n          self.configSubscriptions[key].forEach(function (elem) {\n            elem.dispose();\n          });\n        } else {\n          self.configSubscriptions[key].dispose();\n        }\n      });\n    }; //optimize \"flicker\" before theme is loaded\n\n\n    self.enableBeforeLoaded();\n    self.configOnChangeMap = {\n      enabled: self.onEnabledChange,\n      theme: self.onThemeChange,\n      enableCustomization: self.onEnableCustomizationChange\n    };\n  }\n\n  OCTOPRINT_VIEWMODELS.push([ThemeifyViewModel, ['settingsViewModel'], ['#settings_plugin_themeify']]);\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9vY3RvcHJpbnRfdGhlbWVpZnkvc3RhdGljL2pzL3RoZW1laWZ5LmpzP2E4NDYiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIFZpZXcgbW9kZWwgZm9yIE9jdG9QcmludC1UaGVtZWlmeVxuICpcbiAqIEF1dGhvcjogQmlyayBKb2hhbnNzb25cbiAqIExpY2Vuc2U6IE1JVFxuICovXG5cbiQoZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gVGhlbWVpZnlWaWV3TW9kZWwocGFyYW1ldGVycykge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHNlbGYuY2xhc3NJZCA9ICd0aGVtZWlmeSc7XG4gICAgICAgIHNlbGYuc2V0dGluZ3MgPSBwYXJhbWV0ZXJzWzBdO1xuXG4gICAgICAgIHNlbGYub3duU2V0dGluZ3MgPSB7fTtcbiAgICAgICAgc2VsZi5jdXN0b21SdWxlcyA9IFtdO1xuICAgICAgICAvL1RoZXNlIGhvbGQgdGhlIGN1c3RvbWl6ZWQgYW5kIGJ1aWx0LWluIGNoYW5nZWQvb3ZlcnJpZGVuIGVsZW1lbnRzLCByZXNwZWN0aXZlbHlcbiAgICAgICAgc2VsZi5jdXN0b21pemVkRWxlbWVudHMgPSBbXTtcbiAgICAgICAgc2VsZi5idWlsdEluRWxlbWVudHMgPSBbXTtcblxuICAgICAgICBzZWxmLl9vd25TZXR0aW5nc1ByZXYgPSB7fTtcbiAgICAgICAgLy9ob2xkcyBzdWJzY3JpcHRpb25zLCBzbyB0aGF0IHRoZXkgY2FuIGJlIHJlbW92ZWQgbGF0ZXJcbiAgICAgICAgc2VsZi5jb25maWdTdWJzY3JpcHRpb25zID0ge1xuICAgICAgICAgICAgZW5hYmxlZDogJycsXG4gICAgICAgICAgICB0aGVtZTogJycsXG4gICAgICAgIH07XG4gICAgICAgIHNlbGYudGFiSWNvbnMgPSB7fTtcbiAgICAgICAgc2VsZi5vbGRUYWJDb250ZW50ID0ge307XG4gICAgICAgIHZhciBvbGRWYWwgPSBmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9vd25TZXR0aW5nc1ByZXZba2V5XTtcbiAgICAgICAgfTtcblxuICAgICAgICBzZWxmLm9uU3RhcnR1cENvbXBsZXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgaHRtbElkID0gJCgnaHRtbCcpLmF0dHIoJ2lkJyk7XG4gICAgICAgICAgICAvL1JlbW92ZSBzdHlsaW5nIGlmIHRvdWNoIGlzIGVuYWJsZWRcbiAgICAgICAgICAgIGlmIChodG1sSWQgJiYgaHRtbElkID09ICd0b3VjaCcpIHtcbiAgICAgICAgICAgICAgICAkKCdodG1sJykucmVtb3ZlQ2xhc3Moc2VsZi5jbGFzc0lkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2VsZi51cGRhdGVDb2xvcnMoKTtcbiAgICAgICAgICAgIHNlbGYuX3VwZGF0ZUN1c3RvbVJ1bGVzKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgc2VsZi5zZXR1cEljb25zID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLnRhYkljb25zXG4gICAgICAgICAgICAgICAgLnRhYnMoKVxuICAgICAgICAgICAgICAgIC5maWx0ZXIodGFiID0+IHRhYi5kb21JZCgpICYmIHRhYi5lbmFibGVkKCkpXG4gICAgICAgICAgICAgICAgLm1hcCgodGFiLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgZG9tSWQsIGVuYWJsZWQsIGZhSWNvbiB9ID0gdGFiO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpY29uID0gJChgPGk+YCwgeyBjbGFzczogZmFJY29uKCkgfSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsZW0kID0gJChgJHtkb21JZCgpfSBhYCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGVtJCAmJiBlbGVtJC5jbG9zZXN0KCd1bCcpLmF0dHIoJ2lkJykgPT09ICd0YWJzJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vbGRUYWJDb250ZW50W2RvbUlkKCldID0gJChgJHtkb21JZCgpfSBhYCkuaHRtbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbSQuaHRtbChpY29uKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgVGhlbWVpZnk6IEZhaWxlZCB0byBhZGQgaWNvbiEgJHtkb21JZCgpfSBpcyBub3QgYSBjaGlsZCBvZiB0aGUgdGFiLWxpc3QhYFxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIHNlbGYucmVzdG9yZVRhYnMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYudGFiSWNvbnNcbiAgICAgICAgICAgICAgICAudGFicygpXG4gICAgICAgICAgICAgICAgLmZpbHRlcih0YWIgPT4gdGFiLmRvbUlkKCkpXG4gICAgICAgICAgICAgICAgLm1hcCgodGFiLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgZG9tSWQsIGVuYWJsZWQsIGZhSWNvbiB9ID0gdGFiO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvbGRDb250ZW50ID0gc2VsZi5vbGRUYWJDb250ZW50W2RvbUlkKCldO1xuICAgICAgICAgICAgICAgICAgICBpZiAob2xkQ29udGVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJChgJHtkb21JZCgpfSBhYCkuaHRtbChvbGRDb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIHNlbGYuZW5hYmxlQmVmb3JlTG9hZGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFRoZW1lID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3RoZW1lJyk7XG4gICAgICAgICAgICBpZiAobG9jYWxUaGVtZSkge1xuICAgICAgICAgICAgICAgICQoJ2h0bWwnKVxuICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3Moc2VsZi5jbGFzc0lkKVxuICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MobG9jYWxUaGVtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgc2VsZi5lbmFibGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBzZWxmLm93blNldHRpbmdzLmVuYWJsZWQoKSAmJlxuICAgICAgICAgICAgICAgICQoJ2h0bWwnKS5hdHRyKCdpZCcpICE9PSAndG91Y2gnXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0aGVtZSA9IHNlbGYub3duU2V0dGluZ3MudGhlbWUoKTtcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGhlbWUnLCB0aGVtZSk7XG4gICAgICAgICAgICAgICAgJCgnaHRtbCcpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcyhzZWxmLmNsYXNzSWQpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcyhzZWxmLm93blNldHRpbmdzLnRoZW1lKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHNlbGYuYWRkTmV3Q3VzdG9tUnVsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHJ1bGVPYmogPSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6IGtvLm9ic2VydmFibGUoJycpLFxuICAgICAgICAgICAgICAgIHJ1bGU6IGtvLm9ic2VydmFibGUoJycpLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBrby5vYnNlcnZhYmxlKCcnKSxcbiAgICAgICAgICAgICAgICBlbmFibGVkOiBrby5vYnNlcnZhYmxlKHRydWUpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHNlbGYuX3N1YnNjcmliZVRvRGljdFZhbHVlcyhydWxlT2JqLCAnY3VzdG9tUnVsZXMnKTtcbiAgICAgICAgICAgIHNlbGYub3duU2V0dGluZ3MuY3VzdG9tUnVsZXMucHVzaChydWxlT2JqKTtcbiAgICAgICAgfTtcblxuICAgICAgICBzZWxmLmFkZE5ld0ljb24gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBpY29uID0ge1xuICAgICAgICAgICAgICAgIGRvbUlkOiBrby5vYnNlcnZhYmxlKCcnKSxcbiAgICAgICAgICAgICAgICBlbmFibGVkOiBrby5vYnNlcnZhYmxlKHRydWUpLFxuICAgICAgICAgICAgICAgIGZhSWNvbjoga28ub2JzZXJ2YWJsZSgnJyksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgc2VsZi5fc3Vic2NyaWJlVG9EaWN0VmFsdWVzKGljb24sICd0YWJzJyk7XG4gICAgICAgICAgICBzZWxmLnRhYkljb25zLnRhYnMucHVzaChpY29uKTtcbiAgICAgICAgfTtcblxuICAgICAgICBzZWxmLm9uQmVmb3JlQmluZGluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5zZXR0aW5ncyA9IHNlbGYuc2V0dGluZ3Muc2V0dGluZ3M7XG4gICAgICAgICAgICBzZWxmLm93blNldHRpbmdzID0gc2VsZi5zZXR0aW5ncy5wbHVnaW5zLnRoZW1laWZ5O1xuICAgICAgICAgICAgc2VsZi5jdXN0b21SdWxlcyA9IHNlbGYub3duU2V0dGluZ3MuY3VzdG9tUnVsZXMuZXh0ZW5kKHtcbiAgICAgICAgICAgICAgICByYXRlTGltaXQ6IDUwLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzZWxmLm9uUnVsZVRvZ2dsZSA9IHNlbGYub25SdWxlVG9nZ2xlO1xuICAgICAgICAgICAgc2VsZi50YWJJY29ucyA9IHtcbiAgICAgICAgICAgICAgICBlbmFibGVkOiBzZWxmLm93blNldHRpbmdzLnRhYnMuZW5hYmxlSWNvbnMsXG4gICAgICAgICAgICAgICAgdGFiczogc2VsZi5vd25TZXR0aW5ncy50YWJzLmljb25zLFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaWYgKHNlbGYudGFiSWNvbnMuZW5hYmxlZCgpKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5zZXR1cEljb25zKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNlbGYuZW5hYmxlKCk7XG5cbiAgICAgICAgICAgIHNlbGYuX2NvcHlPd25TZXR0aW5ncygpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHNlbGYudXBkYXRlQ29sb3JzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLl9yZW1vdmVCdWlsdEluU3R5bGVzKCk7XG4gICAgICAgICAgICBpZiAoc2VsZi5vd25TZXR0aW5ncy5lbmFibGVDdXN0b21pemF0aW9uKCkpIHtcbiAgICAgICAgICAgICAgICBzZWxmLm93blNldHRpbmdzXG4gICAgICAgICAgICAgICAgICAgIC5jb2xvcigpXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIocnVsZSA9PiAhIXJ1bGUuZW5hYmxlZCgpKVxuICAgICAgICAgICAgICAgICAgICAubWFwKChydWxlLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9hcHBseVJ1bGUocnVsZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHNlbGYuX3VwZGF0ZUN1c3RvbVJ1bGVzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLl9yZW1vdmVDdXN0b21TdHlsZXMoKTtcbiAgICAgICAgICAgIHNlbGYudXBkYXRlQ29sb3JzKCk7XG4gICAgICAgICAgICBpZiAoc2VsZi5vd25TZXR0aW5ncy5lbmFibGVDdXN0b21pemF0aW9uKCkpIHtcbiAgICAgICAgICAgICAgICBzZWxmLm93blNldHRpbmdzXG4gICAgICAgICAgICAgICAgICAgIC5jdXN0b21SdWxlcygpXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIocnVsZSA9PiAhIXJ1bGUuZW5hYmxlZCgpKVxuICAgICAgICAgICAgICAgICAgICAubWFwKHJ1bGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fYXBwbHlSdWxlKHJ1bGUpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBzZWxmLl9hcHBseVJ1bGUgPSBmdW5jdGlvbihydWxlLCBidWlsdEluID0gZmFsc2UpIHtcbiAgICAgICAgICAgIHZhciBlbGVtID0gJChydWxlLnNlbGVjdG9yKCkpO1xuICAgICAgICAgICAgdmFyIG9sZCA9IGVsZW0uY3NzKHJ1bGUucnVsZSgpKTtcbiAgICAgICAgICAgIGlmIChidWlsdEluKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5idWlsdEluRWxlbWVudHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGVsZW06IGVsZW0sXG4gICAgICAgICAgICAgICAgICAgIHJ1bGU6IHJ1bGUucnVsZSgpLFxuICAgICAgICAgICAgICAgICAgICBvbGQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNlbGYuY3VzdG9taXplZEVsZW1lbnRzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBlbGVtOiBlbGVtLFxuICAgICAgICAgICAgICAgICAgICBydWxlOiBydWxlLnJ1bGUoKSxcbiAgICAgICAgICAgICAgICAgICAgb2xkLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJChydWxlLnNlbGVjdG9yKCkpLmNzcyhydWxlLnJ1bGUoKSwgcnVsZS52YWx1ZSgpKTtcbiAgICAgICAgfTtcblxuICAgICAgICBzZWxmLmNsb25lID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgICAgICAvL2dldCBvYnNlcnZhYmxlIHZhbHVlXG4gICAgICAgICAgICBpZiAodHlwZW9mIG9iaiA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iaigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgb2JqID09PSBudWxsIHx8XG4gICAgICAgICAgICAgICAgdHlwZW9mIG9iaiAhPT0gJ29iamVjdCcgfHxcbiAgICAgICAgICAgICAgICAnaXNBY3RpdmVDbG9uZScgaW4gb2JqXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iajtcblxuICAgICAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIERhdGUpIHZhciB0ZW1wID0gbmV3IG9iai5jb25zdHJ1Y3RvcigpO1xuICAgICAgICAgICAgZWxzZSB2YXIgdGVtcCA9IG9iai5jb25zdHJ1Y3RvcigpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqWydpc0FjdGl2ZUNsb25lJ10gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB0ZW1wW2tleV0gPSBzZWxmLmNsb25lKG9ialtrZXldKTtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG9ialsnaXNBY3RpdmVDbG9uZSddO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgIH07XG5cbiAgICAgICAgc2VsZi5fY29weU93blNldHRpbmdzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBPYmplY3Qua2V5cyhzZWxmLm93blNldHRpbmdzKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSwgaSkge1xuICAgICAgICAgICAgICAgIHNlbGYuX293blNldHRpbmdzUHJldltrZXldID0gc2VsZi5jbG9uZShzZWxmLm93blNldHRpbmdzW2tleV0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgc2VsZi5vbkNoYW5nZSA9IGZ1bmN0aW9uKHNldHRpbmdLZXksIG5ld1ZhbCkge1xuICAgICAgICAgICAgc2VsZi51cGRhdGVDb2xvcnMoKTtcbiAgICAgICAgICAgIHNlbGYuX2NvcHlPd25TZXR0aW5ncygpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHNlbGYub25Db2xvckNoYW5nZSA9IGZ1bmN0aW9uKGVsZW0sIGNvbG9yKSB7XG4gICAgICAgICAgICBzZWxmLnVwZGF0ZUNvbG9ycygpO1xuICAgICAgICAgICAgc2VsZi5fY29weU93blNldHRpbmdzKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgc2VsZi5vbkN1c3RvbVJ1bGVDaGFuZ2UgPSBmdW5jdGlvbihydWxlKSB7XG4gICAgICAgICAgICBzZWxmLnVwZGF0ZUNvbG9ycygpO1xuICAgICAgICAgICAgaWYgKHJ1bGUucnVsZSgpICYmIHJ1bGUuc2VsZWN0b3IoKSAmJiBydWxlLnZhbHVlKCkpIHtcbiAgICAgICAgICAgICAgICBzZWxmLl91cGRhdGVDdXN0b21SdWxlcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHNlbGYub25UaGVtZUNoYW5nZSA9IGZ1bmN0aW9uKG5ld1ZhbCkge1xuICAgICAgICAgICAgdmFyIHByZXYgPSBvbGRWYWwoJ3RoZW1lJyk7XG4gICAgICAgICAgICB2YXIgaGFzQ2xhc3MgPSBjbGF6eiA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICQoJ2h0bWwnKS5oYXNDbGFzcyhjbGF6eik7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKCFoYXNDbGFzcyhuZXdWYWwpKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RoZW1lJywgbmV3VmFsKTtcbiAgICAgICAgICAgICAgICAkKCdodG1sJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKG5ld1ZhbClcbiAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKHByZXYpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZWxmLl9jb3B5T3duU2V0dGluZ3MoKTtcbiAgICAgICAgfTtcblxuICAgICAgICBzZWxmLm9uRW5hYmxlZENoYW5nZSA9IGZ1bmN0aW9uKG5ld1ZhbCkge1xuICAgICAgICAgICAgaWYgKG5ld1ZhbCAmJiAkKCdodG1sJykuYXR0cignaWQnKSAhPT0gJ3RvdWNoJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRoZW1lID0gc2VsZi5vd25TZXR0aW5ncy50aGVtZSgpO1xuICAgICAgICAgICAgICAgICQoJ2h0bWwnKVxuICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3Moc2VsZi5jbGFzc0lkKVxuICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3ModGhlbWUpO1xuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0aGVtZScsIHRoZW1lKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJCgnaHRtbCcpLnJlbW92ZUNsYXNzKHNlbGYuY2xhc3NJZCk7XG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RoZW1lJywgZmFsc2UpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZWxmLl9jb3B5T3duU2V0dGluZ3MoKTtcbiAgICAgICAgfTtcblxuICAgICAgICBzZWxmLm9uRW5hYmxlQ3VzdG9taXphdGlvbkNoYW5nZSA9IGZ1bmN0aW9uKG5ld1ZhbCkge1xuICAgICAgICAgICAgaWYgKG5ld1ZhbCkge1xuICAgICAgICAgICAgICAgIHNlbGYudXBkYXRlQ29sb3JzKCk7XG4gICAgICAgICAgICAgICAgc2VsZi5fdXBkYXRlQ3VzdG9tUnVsZXMoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2VsZi5fcmVtb3ZlQnVpbHRJblN0eWxlcygpO1xuICAgICAgICAgICAgICAgIHNlbGYuX3JlbW92ZUN1c3RvbVN0eWxlcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2VsZi5fY29weU93blNldHRpbmdzKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgc2VsZi5vbkljb25zRW5hYmxlQ2hhbmdlID0gZnVuY3Rpb24obmV3VmFsKSB7XG4gICAgICAgICAgICBpZiAobmV3VmFsKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5zZXR1cEljb25zKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNlbGYucmVzdG9yZVRhYnMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBzZWxmLm9uSWNvbkNoYW5nZSA9IGZ1bmN0aW9uKGljb24sIHZhbHVlLCBwcm9wS2V5KSB7XG4gICAgICAgICAgICBpZiAoIXNlbGYudGFiSWNvbnMuZW5hYmxlZCgpKSByZXR1cm47XG5cbiAgICAgICAgICAgIGlmIChwcm9wS2V5ID09PSAnZW5hYmxlZCcgJiYgIXZhbHVlKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5yZXN0b3JlVGFicygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2VsZi5zZXR1cEljb25zKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgc2VsZi5fcmVtb3ZlQ3VzdG9tU3R5bGVzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLmN1c3RvbWl6ZWRFbGVtZW50cy5tYXAoZWxlbSA9PiBlbGVtLmVsZW0uY3NzKGVsZW0ucnVsZSwgJycpKTtcbiAgICAgICAgfTtcblxuICAgICAgICBzZWxmLl9yZW1vdmVCdWlsdEluU3R5bGVzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLmJ1aWx0SW5FbGVtZW50cy5tYXAoZWxlbSA9PiBlbGVtLmVsZW0uY3NzKGVsZW0ucnVsZSwgJycpKTtcbiAgICAgICAgfTtcblxuICAgICAgICBzZWxmLl9yZW1vdmVDdXN0b21TdHlsZXNCeVJ1bGUgPSBmdW5jdGlvbihydWxlKSB7XG4gICAgICAgICAgICAkKHJ1bGUuc2VsZWN0b3IoKSkuY3NzKHJ1bGUucnVsZSgpLCAnJyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgc2VsZi5vblJ1bGVUb2dnbGUgPSBmdW5jdGlvbihydWxlKSB7XG4gICAgICAgICAgICBydWxlLmVuYWJsZWQoIXJ1bGUuZW5hYmxlZCgpKTtcbiAgICAgICAgICAgIC8vb25DdXN0b21Db2xvckNoYW5nZSB3aWxsIHBpY2t1cCB0aGlzIGNoYW5nZSBhbmQgdXBkYXRlIGFjY29yZGluZ2x5XG4gICAgICAgIH07XG5cbiAgICAgICAgc2VsZi5ydWxlSXNEZWxldGVhYmxlID0gZnVuY3Rpb24ocnVsZSkge1xuICAgICAgICAgICAgLy9kZWxldGVhYmxlIGlmIG5vdCBleGlzdHNcbiAgICAgICAgICAgIGlmICghcnVsZS5kZWxldGFibGUgfHwgdHlwZW9mIHJ1bGUuZGVsZXRhYmxlICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcnVsZS5kZWxldGFibGUoKTtcbiAgICAgICAgfTtcblxuICAgICAgICBzZWxmLm9uQ3VzdG9tUnVsZURlbGV0ZSA9IGZ1bmN0aW9uKHJ1bGUpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLnJ1bGVJc0RlbGV0ZWFibGUocnVsZSkpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmN1c3RvbVJ1bGVzLnJlbW92ZShydWxlKTtcbiAgICAgICAgICAgICAgICBzZWxmLl91cGRhdGVDdXN0b21SdWxlcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHNlbGYub25JY29uRGVsZXRlID0gZnVuY3Rpb24oaWNvbikge1xuICAgICAgICAgICAgc2VsZi5yZXN0b3JlVGFicygpO1xuICAgICAgICAgICAgc2VsZi50YWJJY29ucy50YWJzLnJlbW92ZShpY29uKTtcbiAgICAgICAgICAgIHNlbGYuc2V0dXBJY29ucygpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHNlbGYuX3N1YnNjcmliZVRvRGljdFZhbHVlcyA9IGZ1bmN0aW9uKGRpY3QsIGtleSwgc3Vic2NyaWJlRnVuYykge1xuICAgICAgICAgICAgdmFyIHN1YkZ1bmMgPSBzdWJzY3JpYmVGdW5jXG4gICAgICAgICAgICAgICAgPyBzdWJzY3JpYmVGdW5jLmJpbmQodGhpcywgZGljdClcbiAgICAgICAgICAgICAgICA6IHNlbGYub25DdXN0b21SdWxlQ2hhbmdlLmJpbmQodGhpcywgZGljdCk7XG4gICAgICAgICAgICBPYmplY3Qua2V5cyhkaWN0KS5tYXAoZGljdEF0dHIgPT4ge1xuICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnU3Vic2NyaXB0aW9uc1trZXldLnB1c2goXG4gICAgICAgICAgICAgICAgICAgIGRpY3RbZGljdEF0dHJdLnN1YnNjcmliZSh2YWwgPT4gc3ViRnVuYyh2YWwsIGRpY3RBdHRyKSlcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHNlbGYub25TZXR0aW5nc1Nob3duID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvL3N1YnNjcmliZSB0byBjaGFuZ2VzXG4gICAgICAgICAgICBPYmplY3Qua2V5cyhzZWxmLm93blNldHRpbmdzKS5tYXAoKGtleSwgaSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChrZXkgPT0gJ2N1c3RvbVJ1bGVzJykge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZ1N1YnNjcmlwdGlvbnNba2V5XSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmN1c3RvbVJ1bGVzKCkubWFwKChydWxlLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL3N1YnNjcmliZSB0byB0aGUgYXR0cmlidXRlcyAoc2VsZWN0b3IsIHJ1bGUsIHZhbHVlLCBlbmFibGVkIGV0YylcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3N1YnNjcmliZVRvRGljdFZhbHVlcyhydWxlLCBrZXkpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGtleSA9PSAnY29sb3InKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnU3Vic2NyaXB0aW9uc1trZXldID0gW107XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdWJGdW5jID0gc2VsZi5vbkNvbG9yQ2hhbmdlO1xuICAgICAgICAgICAgICAgICAgICAvL0xvb3AgcnVsZXNcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5vd25TZXR0aW5ncy5jb2xvcigpLm1hcCgocnVsZSwgaSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9zdWJzY3JpYmUgdG8gdGhlIGF0dHJpYnV0ZXMgKHNlbGVjdG9yLCBydWxlLCB2YWx1ZSwgZW5hYmxlZCBldGMpXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9zdWJzY3JpYmVUb0RpY3RWYWx1ZXMocnVsZSwga2V5LCBzdWJGdW5jKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChrZXkgPT0gJ3RhYnMnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1YiA9IChzZWxmLmNvbmZpZ1N1YnNjcmlwdGlvbnNba2V5XSA9IFtdKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBlbmFibGVkLCB0YWJzIH0gPSBzZWxmLnRhYkljb25zO1xuICAgICAgICAgICAgICAgICAgICBzdWIucHVzaChlbmFibGVkLnN1YnNjcmliZShzZWxmLm9uSWNvbnNFbmFibGVDaGFuZ2UpKTtcbiAgICAgICAgICAgICAgICAgICAgdGFicygpLm1hcCgodGFiLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9zdWJzY3JpYmVUb0RpY3RWYWx1ZXMoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm9uSWNvbkNoYW5nZVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy9Vc2UgdGhlIG1hcCBmb3Igc2ltcGxlIHN1YnNjcmlwdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9uQ2hhbmdlRnVuYyA9IHNlbGYuY29uZmlnT25DaGFuZ2VNYXBba2V5XVxuICAgICAgICAgICAgICAgICAgICAgICAgPyBzZWxmLmNvbmZpZ09uQ2hhbmdlTWFwW2tleV1cbiAgICAgICAgICAgICAgICAgICAgICAgIDogc2VsZi5vbkNoYW5nZS5iaW5kKHRoaXMsIGtleSk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnU3Vic2NyaXB0aW9uc1trZXldID0gc2VsZi5vd25TZXR0aW5nc1tcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleVxuICAgICAgICAgICAgICAgICAgICBdLnN1YnNjcmliZShvbkNoYW5nZUZ1bmMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIHNlbGYub25TZXR0aW5nc0hpZGRlbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy9DbGVhbnVwIHN1YnNjcmlwdGlvbnNcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHNlbGYuY29uZmlnU3Vic2NyaXB0aW9ucykubWFwKChrZXksIGkpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShzZWxmLmNvbmZpZ1N1YnNjcmlwdGlvbnNba2V5XSkpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWdTdWJzY3JpcHRpb25zW2tleV0uZm9yRWFjaChlbGVtID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0uZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZ1N1YnNjcmlwdGlvbnNba2V5XS5kaXNwb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy9vcHRpbWl6ZSBcImZsaWNrZXJcIiBiZWZvcmUgdGhlbWUgaXMgbG9hZGVkXG4gICAgICAgIHNlbGYuZW5hYmxlQmVmb3JlTG9hZGVkKCk7XG5cbiAgICAgICAgc2VsZi5jb25maWdPbkNoYW5nZU1hcCA9IHtcbiAgICAgICAgICAgIGVuYWJsZWQ6IHNlbGYub25FbmFibGVkQ2hhbmdlLFxuICAgICAgICAgICAgdGhlbWU6IHNlbGYub25UaGVtZUNoYW5nZSxcbiAgICAgICAgICAgIGVuYWJsZUN1c3RvbWl6YXRpb246IHNlbGYub25FbmFibGVDdXN0b21pemF0aW9uQ2hhbmdlLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIE9DVE9QUklOVF9WSUVXTU9ERUxTLnB1c2goW1xuICAgICAgICBUaGVtZWlmeVZpZXdNb2RlbCxcbiAgICAgICAgWydzZXR0aW5nc1ZpZXdNb2RlbCddLFxuICAgICAgICBbJyNzZXR0aW5nc19wbHVnaW5fdGhlbWVpZnknXSxcbiAgICBdKTtcbn0pO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIG9jdG9wcmludF90aGVtZWlmeS9zdGF0aWMvanMvdGhlbWVpZnkuanMiXSwibWFwcGluZ3MiOiI7Ozs7QUFBQTs7Ozs7O0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFDQTtBQUtBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUtBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///1\n")},function(module,exports){eval("// removed by extract-text-webpack-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL29jdG9wcmludF90aGVtZWlmeS9zdGF0aWMvbGVzcy9iYXNlLmxlc3M/ZTc2OCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyByZW1vdmVkIGJ5IGV4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vb2N0b3ByaW50X3RoZW1laWZ5L3N0YXRpYy9sZXNzL2Jhc2UubGVzc1xuLy8gbW9kdWxlIGlkID0gMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2\n")}]);